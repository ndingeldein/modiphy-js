define("gallery/gallery-item",["backbone","backbone.select"],function(e){"use strict";var t=e.Model.extend({defaults:{parent_id:0,gallery_id:1,filename:"",filesize:0,width:0,height:0,mime:"",category:0,linktext01:"",linktext02:"",link01:"",link02:"",link03:"",target01:"",target02:"",target03:"",order:0,field01:"",field02:"",field03:"",field04:"",field05:"",field06:"",field07:"",field08:"",field09:"",field10:"",scaleWidth:"",scaleHeight:"",description01:"",description02:"",description03:"",subcat:0,objType:0},fluxPath:"https://modiphy.dnsconnect.net/~webgalle/ez_img/",thumbnailPath:"http://webgallerydisplay.com/image.php?id=",defaultLinkField:"link01",linkFields:["link01","link02","link02"],initialize:function(){e.Select.Me.applyTo(this)},imageUrl:function(e,t){return e=typeof e!="undefined"?e:0,t=typeof t!="undefined"?t:0,!e&&!t?this.fluxPath+this.get("gallery_id")+"/"+this.get("id")+"."+this.get("filename").split(".").pop().toLowerCase():(e=e?e:this.get("width"),t=t?t:this.get("height"),this.thumbnailPath+this.get("id")+"&maxwidth="+e+"&maxheight="+t)},linkUrl:function(e,t){return e=e?e:"",t=t?t:this.defaultLinkField,_.indexOf(this.linkFields,t)==-1&&(t=this.defaultLinkField),this.get(t)?this.get(t):e}});return t}),define("gallery/gallery-items",["backbone","gallery/gallery-item","backbone.select"],function(e,t){"use strict";var n=e.Collection.extend({model:t,initialize:function(t){e.Select.One.applyTo(this,t)}});return n}),define("gallery/gallery-category",["backbone","gallery/gallery-items","backbone.select"],function(e,t){"use strict";var n=e.Model.extend({defaults:{description:"",gallery_id:0,image_id:0,order:0,parent_id:0,items:new t},initialize:function(){e.Select.Me.applyTo(this)}});return n}),define("gallery/gallery-categories",["backbone","gallery/gallery-category","backbone.select"],function(e,t){"use strict";var n=e.Collection.extend({model:t,initialize:function(t){e.Select.One.applyTo(this,t)}});return n}),define("gallery/image-gallery",["backbone","gallery/gallery-categories","backbone.select"],function(e,t){"use strict";var n=e.Model.extend({defaults:{title:"",categories:new t},initialize:function(){e.Select.Me.applyTo(this)}});return n}),define("gallery/image-galleries",["backbone","gallery/image-gallery","backbone.select"],function(e,t){"use strict";var n=e.Collection.extend({model:t,initialize:function(t){e.Select.One.applyTo(this,t)}});return n}),define("gallery/gallery-loader",["lodash","jquery","backbone","modiphy","gallery/image-galleries","gallery/image-gallery","gallery/gallery-categories","gallery/gallery-category","gallery/gallery-items"],function(e,t,n,r,i,s,o,u,a){"use strict";var f=function(t){t=t||{};var n={jsonPath:"http://www.webgallerydisplay.com/lib/cached_gallery_jsonp.php"};e.defaults(this,t,n)};return e.extend(f.prototype,{triggerMethod:r.triggerMethod,load:function(t){this.deferreds&&this._stopLoading(),e.isArray(t)?this._loadGalleries(t):this._loadGallery(t)},_loadGalleries:function(n){this.deferreds=[],e.each(n,function(e){this.deferreds.push(this._loadGallery(e))},this),t.when.apply(t,this.deferreds).done(e.bind(this._allDataLoaded,this))},_loadGallery:function(n){var r=t.Deferred();return t.ajax({url:this.jsonPath,data:{gallery_id:n},dataType:"jsonp"}).done(e.bind(this._dataLoaded,this,r,n)).fail(r.reject),r},_dataLoaded:function(e,t,n){if(n.success){var r=this._createGallery(t,n);e.resolve(r)}else e.reject(),alert("Gallery not found :(\nPlease try again!")},_allDataLoaded:function(){var t=new i;e.each(arguments,function(e){t.add(e)}),this.trigger("galleries:loaded",t)},_createGallery:function(t,n){var r=new o;e.each(n.images,e.bind(this._createCategory,this,n,r));var i=new s({id:t,categories:r});return this.triggerMethod("gallery:loaded",i),i},_createCategory:function(e,t,n,r){e.categories[r].items=new a(n),t.add(new u(e.categories[r]))},_stopLoading:function(){this.deferreds&&(e.each(this.deferreds,function(e){e.reject()}),this.deferreds.length=0)}}),e.extend(f.prototype,n.Events),f}),define("gallery/gallery",["gallery/gallery-item","gallery/gallery-items","gallery/gallery-category","gallery/gallery-categories","gallery/image-gallery","gallery/image-galleries","gallery/gallery-loader"],function(e,t,n,r,i,s,o){"use strict";var u={GalleryItem:e,GalleryItems:t,GalleryCategory:n,GalleryCategories:r,ImageGallery:i,ImageGalleries:s,GalleryLoader:o};return u}),define("modiphy.gallery",["lodash","modiphy","gallery/gallery"],function(e,t,n){"use strict";return e.extend(t,n),t}),define("gallery/modiphy.gallery.min",function(){});