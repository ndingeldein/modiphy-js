// Trigger Method
// --------------
// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v2.4.1
//
// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

define("helpers/trigger-method",["lodash"],function(e){"use strict";var t=function(){function n(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi;return function(r,i,s){var o=arguments.length<3;o&&(s=i,i=s[0]);var u="on"+i.replace(t,n),a=r[u],f;return e.isFunction(a)&&(f=a.apply(r,o?e.rest(s):s)),e.isFunction(r.trigger)&&(o+s.length>1?r.trigger.apply(r,o?s:[i].concat(e.drop(s,0))):r.trigger(i)),f}}(),n=function(e){return t(this,arguments)};return n}),define("helpers/get-value",["lodash"],function(e){"use strict";var t=function(t,n,r){return e.isFunction(t)&&(t=r?t.apply(n,r):t.call(n)),t};return t}),define("helpers/map-model",["lodash"],function(e){"use strict";var t=function(t,n){return e.mapKeys(t,function(e,t){return n[t]?n[t]:t})};return t}),define("helpers/deparam",["jquery"],function(e){"use strict";var t=function(t,n){var r={},i={"true":!0,"false":!1,"null":null};return e.each(t.replace(/\+/g," ").split("&"),function(t,s){var o=s.split("="),u=decodeURIComponent(o[0]),a,f=r,l=0,c=u.split("]["),h=c.length-1;/\[/.test(c[0])&&/\]$/.test(c[h])?(c[h]=c[h].replace(/\]$/,""),c=c.shift().split("[").concat(c),h=c.length-1):h=0;if(o.length===2){a=decodeURIComponent(o[1]),n&&(a=a&&!isNaN(a)?+a:a==="undefined"?undefined:i[a]!==undefined?i[a]:a);if(h)for(;l<=h;l++)u=c[l]===""?f.length:c[l],f=f[u]=l<h?f[u]||(c[l+1]&&isNaN(c[l+1])?{}:[]):a;else e.isArray(r[u])?r[u].push(a):r[u]!==undefined?r[u]=[r[u],a]:r[u]=a}else u&&(r[u]=n?undefined:"")}),r},n=function(e,n){var r=e.indexOf("?");return e=r===-1?"":e.slice(r+1),t(e,n)},r={fragment:t,querystring:n};return r}),define("helpers",["helpers/trigger-method","helpers/get-value","helpers/map-model","helpers/deparam"],function(e,t,n,r){"use strict";var i={triggerMethod:e,getValue:t,mapModel:n,deparam:r};return i}),define("core/view",["lodash","jquery","backbone","helpers/get-value","helpers/trigger-method"],function(e,t,n,r,i){"use strict";var s=n.View.extend({constructor:function(i){e.bindAll(this,"render"),e.bindAll(this,"show"),e.bindAll(this,"hide"),e.bindAll(this,"triggerShown"),e.bindAll(this,"triggerHidden"),this._deferred=t.Deferred(),this._deferred.promise(this),this._deferred.resolve(),i=r(i,this),this.options=e.extend({},e.result(this,"options"),i),n.View.call(this,this.options)},_isShowing:!1,_isDestroyed:!1,triggerMethod:i,isShowing:function(){return this._isShowing},show:function(){return this._isShowing?this:(this._isShowing=!0,this.triggerMethod("show"),this.killTransitions(),this._deferred=t.Deferred(),this._deferred.done(e.bind(this.triggerMethod,this,"shown")),e.isFunction(this.showTransition)?this.showTransition():this._deferred.resolve(),this._deferred.promise(this))},hide:function(){return this._isShowing?(this._isShowing=!1,this.triggerMethod("hide"),this.killTransitions(),this._deferred=t.Deferred(),this._deferred.done(e.bind(this.triggerMethod,this,"hidden")),e.isFunction(this.hideTransition)?this.hideTransition():this._deferred.resolve(),this._deferred.promise(this)):this},toggleShow:function(){this.isShowing()?this.hide():this.show()},triggerShown:function(){if(!this._isShowing)return;if(!this._deferred)return;this._deferred.resolve()},triggerHidden:function(){if(this._isShowing)return;if(!this._deferred)return;this._deferred.resolve()},killTransitions:function(){this._deferred&&(this._deferred.reject(),this._deferred=undefined)},destroy:function(){return this.killTransitions(),this._isDestroyed?this:(this.triggerMethod("before:destroy",this),this.$el.empty(),this.undelegateEvents(),this._isDestroyed=!0,this.triggerMethod("destroy",this),this.remove(),this)}});return s}),define("selectable/select-view",["lodash","core/view"],function(e,t){"use strict";var n={SelectMe:{_onSelectModel:function(e){this.triggerMethod("select:view",this,e)},_onDeselectModel:function(e){this.triggerMethod("deselect:view",this,e)},_onReselectModel:function(e){this.triggerMethod("reselect:view",this,e)}},SelectOne:{_onSelectOneModel:function(e,t){this.triggerMethod("select:one:view",this,e,t)},_onDeselectOneModel:function(e,t){this.triggerMethod("deselect:one:view",this,e,t)},_onReselectOneModel:function(e,t){this.triggerMethod("reselect:one:view",this,e,t)}},SelectMany:{_onSelectAllModels:function(e,t){this.triggerMethod("select:all:view",this,e,t)},_onSelectNoneModels:function(e,t){this.triggerMethod("select:none:view",this,e,t)},_onSelectSomeModels:function(e,t){this.triggerMethod("select:some:view",this,e,t)},_onReselectAnyModels:function(e,t){this.triggerMethod("reselect:any:view",this,e,t)}}},r={Me:{applyTo:function(r){if(e.isUndefined(r.model)||r instanceof t==0)throw new Error("The view is not an instance of M.View or view.model is undefined");e.extend(r,n.SelectMe),r.listenTo(r.model,"selected",r._onSelectModel,r),r.listenTo(r.model,"deselected",r._onDeselectModel,r),r.listenTo(r.model,"reselected",r._onReselectModel,r)}},One:{applyTo:function(r){if(e.isUndefined(r.collection)||r instanceof t==0)throw new Error("The view is not an instance of M.View or view.collection is undefined");e.extend(r,n.SelectOne),r.listenTo(r.collection,"select:one",r._onSelectOneModel),r.listenTo(r.collection,"deselect:one",r._onDeselectOneModel),r.listenTo(r.collection,"reselect:one",r._onReselectOneModel)}},Many:{applyTo:function(t){e.extend(t,n.SelectMany),t.listenTo(t.collection,"select:all",t._onSelectAllModels),t.listenTo(t.collection,"select:none",t._onSelectNoneModels),t.listenTo(t.collection,"select:some",t._onSelectSomeModels),t.listenTo(t.collection,"reselect:any",t._onReselectAnyModels)}}};return r}),define("selectable/selectable-model",["backbone","backbone.select"],function(e){"use strict";var t=e.Model.extend({initialize:function(){e.Select.Me.applyTo(this)}});return t}),define("selectable/single-collection",["backbone","backbone.select"],function(e){"use strict";var t=e.Collection.extend({initialize:function(t){e.Select.One.applyTo(this,t)}});return t}),define("selectable/multi-collection",["backbone","backbone.select"],function(e){"use strict";var t=e.Collection.extend({initialize:function(t){e.Select.Many.applyTo(this,t)}});return t}),define("selectable",["lodash","selectable/select-view","selectable/selectable-model","selectable/single-collection","selectable/multi-collection"],function(e,t,n,r,i){"use strict";var s={SelectView:t,SelectableModel:n,SingleCollection:r,MultiCollection:i};return s}),define("core/item-view",["core/view"],function(e){"use strict";var t=e.extend({render:function(){return this.triggerMethod("before:render"),this.model&&this.template&&this.$el.html(this.template(this.model.toJSON())),this.triggerMethod("render"),this}});return t}),define("core/view-factory",["lodash","core/view","core/item-view"],function(e,t,n){"use strict";var r=function(r){var i={viewOptions:{},viewType:n,viewPrototype:t,modelViewOptionsProperty:"viewOptions",modelViewTypeProperty:"viewType"};r=r?r:{},e.extend(this,e.defaults(r,i))};return e.extend(r.prototype,{getView:function(t){var n=this._getViewType(t),r=e.extend(this._getViewOptions(t),{model:t}),i=new n(r);return i},_getViewType:function(t){var n=t.get(this.modelViewTypeProperty);return e.isFunction(n)&&n.prototype instanceof this.viewPrototype?n:this.viewType},_getViewOptions:function(e){var t=e.get(this.modelViewOptionsProperty);return t?t:this.viewOptions}}),r}),define("core/container-view",["core/view","backbone.babysitter"],function(e,t){"use strict";var n=e.extend({constructor:function(){this.container=new t,e.prototype.constructor.apply(this,arguments)},render:function(){return this._hasBeenRendered=!0,this.triggerMethod("before:render"),this.model&&this.template&&this.$el.html(this.template(this.model.toJSON())),this.triggerMethod("before:render:children"),this._renderChildren(),this.triggerMethod("render:children"),this.triggerMethod("render"),this},_renderChildren:function(){this.container.each(function(e){e.render(),(!e.options.el||!this.el.contains(e.el))&&this.$el.append(e.el)},this)},remove:function(){e.prototype.remove.call(this),this.container.each(function(e){e.remove()})},_destroyItemView:function(e){e.destroy(),this.container.remove(e)},destroy:function(){this.triggerMethod("before:destroy:container"),this.container.each(this._destroyItemView,this),this.triggerMethod("destroy:container"),e.prototype.destroy.call(this)}});return n}),define("core/collection-view",["lodash","backbone","core/view","core/item-view","backbone.babysitter","core/container-view","helpers/get-value","core/view-factory"],function(e,t,n,r,i,s,o,u){"use strict";var a=s.extend({constructor:function(i){i=o(i,this);var a={factoryOptions:{},collection:new t.Collection};this.options=e.extend({},e.result(this,"options"),i),this.options=e.defaults(this.options,a),this.factory=new u(this.options.factoryOptions),this.factory.viewType.prototype instanceof n==0&&(this.factory.viewType=r),s.call(this,this.options)},initialize:function(){this.listenTo(this.collection,"add",this._onModelAdded,this),this.listenTo(this.collection,"remove",this._onModelRemoved,this),this.listenTo(this.collection,"reset",this._onCollectionReset,this)},_onModelAdded:function(e){if(this._hasBeenRendered){var t=this._getChildView(e);t=this._addChildView(t,this.collection.indexOf(e)),this.triggerMethod("add:view",t)}},_onModelRemoved:function(e){this._hasBeenRendered&&this._removeChildView(e)},_onCollectionReset:function(){this._hasBeenRendered&&this.render()},_renderChildren:function(){var t=this.container;this.container=new i,this.container.each(function(e){this.collection.get(e.model.cid)?e.$el.detach():(e.destroy(),t.remove(e))},this),this.$el.empty(),this.collection.each(function(n){var r=t.findByModelCid(n.cid);e.isUndefined(r)&&(r=this._getChildView(n)),this._addChildView(r)},this)},_removeChildView:function(e){var t=this.container.findByModelCid(e.cid);this.container.remove(t),t.destroy(),this.triggerMethod("remove:view",t)},_addChildView:function(t,n){return this.container.add(t),!e.isUndefined(n)&&n>=0&&n<this.$el.children().length?(this.$el.children().eq(n).before(t.render().el),console.log(t.template)):this.$el.append(t.render().el),t},_getChildView:function(e){var t=this.factory.getView(e);return t}});return a}),define("core/dom-collection-view",["lodash","core/collection-view"],function(e,t){"use strict";function r(e,t){var n=this.factory.modelViewOptionsProperty,r=e.get(n)?e.get(n):{};r.el=this.$el.children().eq(t),e.set(n,r)}var n={applyTo:function(n){if(e.isUndefined(n)||n instanceof t!=1)throw new Error("view is undefined or view is not instance of CollectionView");if(n.$el.children().length!==n.collection.length||e.isUndefined(n.collection))throw new Error("view has no collection or collection length does not match view el's children length");n.collection.each(r,n)}};return n}),define("core/viewer",["lodash","backbone","core/view","core/container-view","helpers/get-value"],function(e,t,n,r,i){"use strict";var s=r.extend({constructor:function(n){n=i(n,this),n.model?n.model.set("view",undefined):n.model=new t.Model,this.options=e.extend({},e.result(this,"options"),n),r.call(this,this.options)},initialize:function(){this.listenTo(this.model,"change:view",this._onViewChanged,this)},_onViewChanged:function(e){e.get("view")instanceof n&&this._setView()},_setView:function(){this._currentView&&!this._previousView&&(this._previousView=this._currentView),this._currentView=this.model.get("view"),this.container.add(this._currentView),this.container.length>1?this._previousView.hide().done(e.bind(this._removePreviousViews,this)):(this._renderChildren(),this._currentView.show())},_removePreviousViews:function(){this.container.each(this._removePreviousView,this),this._previousView=undefined,this._renderChildren(),this._currentView.show()},_removePreviousView:function(e){e.cid!=this.model.get("view").cid&&this._destroyItemView(e)},getCurrentView:function(){return this.model.get("view")}});return s}),define("core",["lodash","helpers","selectable","core/view","core/item-view","core/view-factory","core/container-view","core/collection-view","core/dom-collection-view","core/viewer"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l={View:r,ItemView:i,ViewFactory:s,ContainerView:o,CollectionView:u,DomCollectionView:a,Viewer:f};return e.extend(t,l,n),t}),define("modiphy",["core"],function(e){"use strict";return e}),define("modiphy.min",function(){});