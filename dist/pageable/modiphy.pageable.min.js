define("pageable/page-to-title",[],function(){"use strict";var e=function(e){return e.split("_").join(" ").replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})};return e}),define("pageable/page",["lodash","backbone","modiphy","pageable/page-to-title"],function(e,t,n){"use strict";var r=t.Model.extend({defaults:function(){return{content:{},gallery_id:0,name:"page_name",layout:"default",type:"text"}},initialize:function(){this.set("navText",this.get("navText")||n.pageToTitle(this.get("name"))),this.set("title",this.get("title")||this.get("navText")),this.isOverlayPage()&&this.get("layout")==="default"&&this.set("layout","default_overlay"),t.Select.Me.applyTo(this)},isOverlayPage:function(){return e.isString(this.get("linkUrl"))?this.get("linkUrl").substr(0,9)==="?overlay=":!1},isLoaded:function(){return e.isUndefined(this.get("content").html)||e.isUndefined(this.get("content").json)?!1:!0}});return r}),define("pageable/pages",["modiphy","pageable/page"],function(e,t){"use strict";var n=e.SingleCollection.extend({model:t});return n}),define("pageable/page-loader",["lodash","jquery","backbone","modiphy","pageable/page"],function(e,t,n,r,i){"use strict";var s=function(t){t=t||{};var n={jsonPath:"json/json.php",htmlPath:"layout/page/page.php"};e.defaults(this,t,n)};return e.extend(s.prototype,{load:function(e){return this._stopLoading(),this.deferreds=[],this.deferreds.push(this.loadHTML(e)),this.deferreds.push(this.loadJSON(e)),t.when.apply(t,this.deferreds).done(function(t,n){e.set("content",{html:t[1],json:n[0]}),e.trigger("page:loaded",e)})},loadHTML:function(e){var i=t.Deferred();if(e.get("content").html)return i.resolve([e,e.get("content").html]);var s;return n.history.fragment?s=r.deparam.querystring(n.history.fragment):s={},s.page=e.get("name"),s.layout=e.get("layout"),s.title=e.get("title"),s.type=e.get("type"),s.page_id=e.get("id"),s.page_gallery_id=e.get("gallery_id"),s.url=document.URL,t.get(this.htmlPath,s).done(function(t){i.resolve(e,t)}).fail(i.reject),i},loadJSON:function(e){var i=t.Deferred();if(e.get("content").json)return i.resolve([e.get("content").json]);var s;return n.history.fragment?s=r.deparam.querystring(n.history.fragment):s={},s.page=e.get("name"),s.layout=e.get("layout"),s.title=e.get("title"),s.type=e.get("type"),s.page_id=e.get("id"),s.page_gallery_id=e.get("gallery_id"),s.url=document.URL,t.get(this.jsonPath,s,"json").done(i.resolve).fail(i.reject),i},_stopLoading:function(){this.deferreds&&(e.each(this.deferreds,function(e){e.reject()}),this.deferreds.length=0)}}),s}),define("pageable/pageable",["lodash","modiphy","pageable/page","pageable/pages","pageable/page-loader","pageable/page-to-title"],function(e,t,n,r,i,s){"use strict";var o={Page:n,Pages:r,PageLoader:i,pageToTitle:s};return e.extend(t,o),t}),define("pageable/modiphy.pageable.min",function(){});